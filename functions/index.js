





require("dotenv").config();
const axios = require('axios');

const express = require("express");
const { Configuration, OpenAIApi } = require("openai");
const functions =require('firebase-functions');
const app = express();
app.use(express.json());

const openaiApiKey = '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';

const  company_name = 'mombo sacco';

const company_data = `
Mombo Profile Welcome to Mombo Sacco, the award-winning digital savings and credit cooperative society was registered in February 2015 as a Back-Office Services Activity (commonly known as BOSA), targeted at the rapidly growing urban population of Kenyans and regulated by the commissioner of cooperatives development. We are dedicated to making savings easy, fun, and rewarding for our members. With Mombo Sacco, you can achieve your financial goals while enjoying a range of exclusive benefits. Mombo Sacco head Office is located at Westpark Towers 1st floor Suite 107 in Westlands, Nairobi, Kenya. Mombo Sacco grew out of a careful examination of social, business and economic trends in Kenya, of a particularly urban, youthful and technologically-savvy segment of the population. While we discovered that this part of the population - full in its dynamism, innovation and increasingly entrepreneurial spirits - was driven by the insatiable needs of instant gratification, we also found that, given a convenient, reliable and secure platform for savings, young professionals and businesspeople in Kenya can be encouraged to build their savings, not just for a future rainy day, but also to increase their access to credit for purposes of investment. By filling this crucial market gap, Mombo Sacco has grown tremendously, and has continued to attract more members each year. Mombo Sacco Vision Our vision is to become the trusted and innovative financial partner of choice, dedicated to empowering individuals and families to achieve their dreams and aspirations. Mombo Sacco Mission Our mission at Mombo Sacco is to empower individuals by providing inclusive financial solutions that enable them to achieve long-term prosperity for themselves and their families. Mombo Sacco Core Values The core values of Mombo Sacco reflect those attributes we value most in our members, employees, business partners and in all of our interactions. The core values do not change, but rather are consistent attributes that drive our daily activities. Great People • We hire great people and expect a lot from them • We run it like we own it • We always demonstrate a positive 'can do' attitude • We pursue excellence by always striving to be better Integrity • We build trusting, honest relationships through communication • We honor the commitments we make • We treat people with fairness and respect Service Mindset • We put our members first - period • We make helping other people our priority • We create member value while embracing and driving change Teamwork • We provide each other with the best internal customer service • We cultivate a positive team and family spirit • We celebrate our successes and each other's accomplishments - professionally and personally. Mombo Sacco Guiding Principles and Ethics • Treating our members fairly; • Ensuring the voice of our members is heard; • Communicating with our members in plain language that they can understand; • Being transparent about fees and charges and keeping them at reasonable levels; • Involving our members in designing and improving our products and services to best meet their needs; • Supporting staff who work with vulnerable members; • Taking account of the needs of vulnerable members and paying attention to possible indicators of vulnerability particularly with regard to lending and collections; • Adopting a responsible approach to lending and providing information to help members recognize borrowing patterns that appear unsustainable or irresponsible; • Helping our members avoid financial problems through the support of financial education and the design of our products. Here's why you should consider saving with us: 1. Convenience Open an account with Mombo Sacco on the go, in less than 10 minutes, using your smartphone. Our user-friendly app allows you to start saving immediately, without any hassle. 2. Transparency Access all your account details and terms and conditions directly from your smartphone. We believe in complete transparency, ensuring that you have full visibility into your savings. 3. Competitive Profit Rates At Mombo Sacco, we offer the best-in-market fixed returns on your savings. Enjoy attractive profit rates that help your money grow faster. 4. Flexibility Choose from our range of flexible savings accounts that align with your current financial ability and objectives. Whether you are starting small or aiming higher, we have the right account for you. 5. Insurance Your savings with Mombo Sacco are insured by the best insurance company in Kenya. Rest assured that your hard-earned money is protected, providing you with peace of mind. 6. Financial Literacy Access valuable financial literacy resources through our Mombo App. Benefit from Stadi, our artificial intelligence assistant, which offers personalized guidance and insights to help you make informed financial decisions. 7. Affordable Loan Facilities As a Mombo Sacco member, you can access affordable loan facilities. Earn up to 50% interest discounts for each instalment paid in advance. It's all about saving and building a secure financial future. Products 1. Flexible Saving Accounts Individual members can choose from one of our five flexible savings accounts. Each account permits regular savings based on your ability and financial objectives. These accounts provide a reasonable monthly return that accumulates over time and can be withdrawn annually – every January. As a matter of principle, all members are required to purchase 200 shares at 1 share for Ksh 100. In addition, members enjoy affordable loan facilities and complimentary savings protection with Britam Insurance company. Members are restricted to a single account at a time but can one upgrade or downgrade a savings account at your convenience at no cost. In addition, members can pause savings when their financial situation demands such and this will not affect their record with the Sacco. To close the account a member is required to issue a 60 days’ notice and the Sacco will refund the members total Share capital, savings, and interest on savings less any loan balances or loan guarantee balances. • Bronze: Ksh 200 registration fee, Minimum monthly saving of Ksh 500 with a profit rate of 4% per annum and a maximum loan limit of Ksh 100,000 • Silver: Ksh 1,000 registration fee, Minimum monthly saving of Ksh 2,500 with a profit rate of 4.5% per annum and a maximum loan limit of Ksh 500,000 • Gold: Ksh 1,500 registration fee, Minimum monthly saving of Ksh 5,000 with a profit rate of 5% per annum and a maximum loan limit of Ksh 1,500,000 • Platinum: Ksh 2,000 registration fee, Minimum monthly saving of Ksh 10,000 with a profit rate of 6% per annum and a maximum loan limit of Ksh 5,000,000 • Emerald: Ksh 2,000 registration fee, Minimum monthly saving of Ksh 30,000 with a profit rate of 8% per annum and a maximum loan limit of Ksh 8,000,000 A member can open a Flexible savings account, view his shares and savings statements, upgrade or downgrade his savings plan, withdraw his interest on savings and close account by tapping on the icon beside the Flexible savings account section on the Mombo App homepage. 2. Corporates/Chama/Group Saving Accounts Mombo Sacco provides five savings accounts for SMEs, Chamas, and groups of family and friends. These accounts provide regular opportunities for saving, attractive monthly returns, and access to loan facilities for development. The accumulated monthly returns can be withdrawn annually – every January. As a matter of principle, all members are required to purchase 500 shares at 1 share for Ksh 100. Members are limited to a single account at a time but can one upgrade or downgrade a savings account at your convenience at no cost. In addition, members can pause savings when their financial situation demands such and this will not affect their record with the Sacco. To close the account a member is required to issue a 60 days’ notice and the Sacco will refund the members total Share capital, savings, and interest on savings less any loan balances or loan guarantee balances. • Stawi: Minimum monthly saving of Ksh 10,000 with a profit rate of 4% per annum. • Shaba: Minimum monthly saving of Ksh 30,000 with a profit rate of 6% per annum. • Fedha: Minimum monthly saving of Ksh 50,000 with a profit rate of 7% per annum. • Dhahabu: Minimum monthly saving of Ksh 100,000 with a profit rate of 8% per annum. • Zumaridi: Minimum monthly saving of Ksh 300,000 with a profit rate of 9% per annum. A member can open, join a Chama savings account, view his shares and savings statements, upgrade or downgrade his savings plan, approve/decline Chama join requests, view a list of all approved Chama members, remove Chama members, assign Chama members a member number, withdraw interest on savings and close account by tapping on the icon beside the Chama savings account section on the Mombo App homepage. 3. Goal Saving Accounts Individual and group members of Mombo Sacco have access to our Goal Savings Accounts. These accounts enable you to save for fixed periods of time, and they offer attractive returns. Sprint and Marathon Goal Accounts are designed to help you attain your financial goals with agility and resilience, just as their names connote speed and endurance. Multiple accounts with various maturities are available, and profits are distributed every three months. Personal Goals are created and customized to your liking i.e you pick a preferred category, and a preferred name and even schedule reminders as to when you want to contribute to them. Group Goals on the other hand are created and customized to the group’s liking i.e you pick a preferred and a target. Once done, you have an option to invite members you’d like to save with from your contact list. Benefits: a. Goal-based Savings: Members can create specific goals within their main goal account, allowing them to allocate funds towards different objectives and track their progress. b. Easy Fund Transfer: Members can transfer funds in and out of their goal accounts without affecting the main goal account balance, providing flexibility and control over their savings. c. Competitive Interest Rates: The Sprint Goal Account offers a competitive interest rate of 6%, allowing members to earn returns on their short-term savings. The Marathon Goal Account offers a higher interest rate of 10% for long-term savings, maximizing growth potential. d. Redemption Flexibility: The Sprint Goal Account allows for quick redemption within 48 hours, providing access to funds when needed. The Marathon Goal Account offers the option to lock funds for a specific period, promoting disciplined savings and potentially higher returns. e. Personalized Financial Planning: Members can set realistic savings targets, monitor progress, and receive personalized financial guidance to stay on track towards achieving their goals. Join Mombo Sacco today and unlock the power of easy, rewarding, and secure savings. Start your journey towards financial freedom with a trusted cooperative society that puts your needs first. 4. Loan Products Whether you are looking for a car, to renovate a home, to pay for insurance, to buy government bonds, to boost your business, for consumption or to consolidate all your loans, Mombo Sacco can help you. Mombo Sacco leverages on risk-based lending model by use of Mscore that determines a borrower’s loan limit, loan duration and loan interest rate. MOMBO Sacco M-Score is a scoring engine that applies unconventional rich data to the core underwriting model thereby expanding the lending space for individuals that were previously considered “thin file” or “risky” when Binary credit data was used to evaluate them by established financial services players. Below are the key pillars of the MOMBO Sacco M-Score model: 1. Transaction behavior – this consists of Utility payments, spend at Till/ Paybill, payment behavior mainly from mobile money history 2. Demographic and Bureau data – a combination of demographic information with product holding and repayment behavior for existing borrowers. 3. Geo-location data – GPS information coupled with financial transaction behavior. 4. Personal finance Management – MOMBO Sacco savings history, repayment history, transaction history. 5. App-based data – MOMBO app usage, interactions, texts, e-mails, retail receipts, collection texts to assess the creditworthiness of the customer. 6. Machine Learning and automation of backend through robotics – Continuous feedback for model efficacy and model finetuning. MOMBO Sacco for instance uses mobile phone data and e-commerce sales as additional data points for analyzing consumer behavior. Parameters such as long call duration, till spend, frequent high-value mobile top-ups, transactions to certain paybills/ are generally considered as positive indicators, while low-value top-ups, missed savings etc are associated with lower credit scores. We have recently been experimenting with light question/ answer approaches that gauge a customer’s intention to pay—a technique that is especially valuable in the case of thin-file/no-file customers, where other data is scarce, and the customer has saved for a few months. The use of large data sets that are analysed computationally to reveal patterns, trends, and associations, especially relating to human behavior and interactions has changed the game for us in 4 key ways: 1. Introducing transparency to the transactions. The data obtained from customers helps us customize the price and offering for each individual while on the savings side, we can run discounts by having the system pick early savings for instance, or early loan repayments which earn customers 50% discount on the interest rate charged. 2. Eliminated old multiplier approach to what the customer can afford has removed the incessant liquidity challenges faced by traditional Saccos. The customer only qualifies for what they can afford. 3. Behavioral patterns picked from the large data sets have enabled us to pick patterns over the years and successfully deploy an offer management system. For instance, in the period towards December, customers have exciting offers to help them save more for holidays or schools fees and at the same time qualify for better loan sizes. 4. Consumer behavior has enabled us to customize bite-sized daily saving goals for our customers thereby instilling discipline in their savings culture. Data analytics has assisted in driving customer advocacy and thereby competitive advantage for MOMBO Sacco. A higher M-Score, between 1-100, where one (1) is the lowest, will reflect a positive CRB rating and financial history, enabling you to access more credit (up to 5X savings) with longer loan tenures and favourable interest rates. Loan Guarantee ship Because Mombo Sacco operates as a mobile-first Savings and Credit Co-operative Society, you may be wondering what about loan guarantees. Well, guarantors are not the only way to get loans with the Sacco. There are four ways to go about it; ● Self-guarantee - use of own savings to guarantee a loan of similar value to own savings. ● Self-guarantee and guarantors ● Self-guarantee and collateral (secured by issuing evidence of ownership of personal property such as title deeds and logbooks) ● Self-guarantee, guarantors, and collateral If you need a guarantor, Mombo Sacco has devised a fraternal system called the M-Community, where members are introduced and facilitated to interact with each other. The interactions allow for personal relationships which aid you is securing a guarantor for your loan. This savings system is only used by members. In case you can't secure a guarantor, Mombo Sacco management can help in introducing a member to others who will be willing to guarantee them. Guarantors at Mombo Sacco are protected in the sense that they only get to guarantee a part of a loan that they are comfortable with and will form the basis of their liability in that loan. Guarantors’ liability falls as the loan is paid off – with the borrower’s own liability discharged last. It is important to note that loans above one million requires collateral as security in case a borrower’s savings are not sufficient to fully secure the loan. In cases of default, the Sacco will follow up with the borrower to recover the loan, the guarantors will be the last resort. All this is geared towards protecting the guarantors. Mombo Sacco Loan Facilities The offering of credit facilities primarily involves loans. Here are the loans Mombo Sacco offers: 1. Quick Loans These are reliable short-term loans used to cater to emergency personal needs such as medical emergencies, rent, and the likes issued to individual members. They can also cater to cash flow problems. The loans are easily accessible from the Mombo app and repayment period is 1 month. The loans are unsecured and can be accessed by both employed and unemployed Sacco members who have purchased at least the first instalment of share capital, Bronze is Ksh 5,000, Silver, Gold, Platinum and Emerald is Ksh 10,000 each. 2. Salary Advance Loans These are reliable short-term loans used to cater to emergency personal needs such as medical emergencies, rent, and the likes issued to individual members. They can also cater to cash flow problems. The loans are easily accessible from the Mombo app and repayment period is 1 month. The loans are unsecured and can be accessed by only employed Sacco members with at least Ksh 15,000 of savings. Tap on Apply Loan button to view your loan limit. 3. Insta Loans This is also a quick cash loans for short term periods offered to individual members. They can be used for personal and business needs. Their repayment period is within six months and its credit life-insured. Sacco members can borrow up to 5 times their savings based on their Mscore. To access this a member must have saved the minimum amount in his savings plan in the previous month. Security for the loans can be a member’s savings, guarantors’ savings and/or collateral. Tap on Apply Loan button to view your loan limit. 4. Lifestyle Access Loans This loan is offered to individual members for long term expenses to cater to large lifestyle events. This can include weddings, vacations, home renovations, and much more. They have a long repayment period of from 6 months to 48 months (4 years) and are credit life-insured. Sacco members can borrow up to 5 times their savings based on their Mscore. To access this a member must have saved the minimum amount in his savings plan the within the previous three months. Security for the loans can be a member’s savings, guarantors’ savings and/or collateral. Tap on Apply Loan button to view your loan limit. 5. Imarika Loans This loan is offered to Chamas, groups or SMEs for long term development projects or asset acquisition. They have a long repayment period of from 12 months to 48 months (4 years). Chamas can borrow up to 5 times their savings based on their Mscore. To access this a Chama must have saved the minimum amount in their savings plan the within the previous six (6) months. Security for the loans can be a Chama’s savings, and/or collateral. Tap on Apply Loan button to view your Chama loan limit. 6. Nawiri Loans This loan is offered to Chamas, groups or SMEs for short term development projects or asset acquisition. They have a long repayment period of up to 12 months. Chamas can borrow up to 5 times their savings based on their Mscore. To access this a Chama must have saved the minimum amount in their savings plan the within the previous six (6) months. Security for the loans can be a member’s savings, and/or collateral. Tap on Apply Loan button to view your Chama loan limit. Mombo Sacco loan features available to members from the mobile app: Skip A Pay – We know life occasionally throws unexpected troubles your way, and there are times when you may need a little financial relief. As a courtesy to our members, we offer a skip a loan payment program in times of special need. Our skip a payment program does not impact your M-Score rating. You can only skip a payment at least ten days before a payment due date. Remember that you can only skip on the same loan a maximum of two times per calendar year, and you must wait at least sixty days between skips. Submit your application from MOMBO App. Loan Refinance/ Top up - There are a few conditions, and it has to have been at least 6 months since you took the loan to be refinanced/consolidated. Additionally, the loan installments must be in good standing. Please be aware that a settlement amount is automatically taken from your account when you take out a new loan with us. This means that the remaining balance of your loan, any fees as well as interest due are deducted from your new loan amount. Loan Consolidation – A member can consolidate two or more existing Mombo Sacco loans. This is important to our members since loan consolidation reduces a member’s monthly payments thereby enhancing their cashflows. As with your original loan, the application will be subject to our normal credit checks and you can only borrow up to the maximum loan allowance provided by M-Score. For example: If you borrowed Ksh500,000, and your current limit is Ksh 800,000 then you have up to Ksh300,000 left to borrow. Please be aware that a settlement amount is automatically taken from your account when you take out a new loan with us. This means that the remaining balance of your loan, any fees, as well as interest due are deducted from your new loan amount. Loan due date restructure - The day is automatically set to 30 days after your loan is approved, but you're welcome to pick a more convenient one. Things to keep in mind: • You'll always need to pick a date that's at least 3 days in the future. • There is a convenience fee charged of 1.5% of outstanding principal. We do this to adjust for the change in interest payable caused by the increased number of days from your original repayment day to your new repayment day. (Don't worry, it's a one-off! Your repayments won’t be affected.) • You won't be able to change your repayment day if: there's a repayment pending or in progress, or you've missed one or more repayments or have defaulted on your loan. Loan Offset – Mombo Sacco allows members in distress to use their savings to settle an outstanding loan provided the loan balance and loan offset fees are equal to or less than their savings balance. Loan offset fee is 1.5% of loan balance. 50% interest discount - To assist our members, when a loan is opened after 25th March 2020, loan installments settled early would attract up to 50% interest discount. This would enable you save more and in essence allow you to experience the most affordable loans in Kenya. Open a loan account and view the performing installments to identify your 50% interest discount. Mombo Sacco Organizational Structure Members of Mombo Sacco are the ultimate decision makers through an Annual General Meeting (commonly known as AGM). The members elect a management committee to oversee the day to day running of the Sacco operations and a supervisory committee to audit the management committee. The Management committee is responsible to employ and manage employees of the Sacco through the Sacco manager. Mombo Sacco Regulator Mombo Sacco is not regulated by Sacco Societies Regulatory (commonly known as SASRA). It is important to note that Withdrawable Deposit-Taking Saccos or those that offer Front-Office Service Activities are regulated by SASRA. Seeing that Mombo Sacco is a non-withdrawable deposit-taking Sacco or only offer Back-Office Services activities, we are regulated by the office of the Commissioner for Co-operatives Development. Share capital is the unit of ownership in a company or co-operative. A Sacco is a public entity, and all members are expected to own a piece of the entity hence the requirement for members to purchase share capital. Share capital earns dividends for members annually and is refundable when a member exits a Sacco. Currently the Government of Kenya requires all Saccos to have at least 10% of their total deposits as shares. Deposits (savings) is the regular contribution made by members towards their savings which in turn earn interest and members borrow from. Deposits are refundable when a member exits from a Sacco. Savings are only recorded for the current period to ensure financial discipline of putting aside some money monthly. Mombo Sacco members cannot pre-deposit or post-deposit monthly savings Therefore, you can only save for the current month. Here is how you can spare some cash for savings i. Establish a budget and track your spending with the objective to reduce it. ii. Consolidate debt and save on interest iii. Set savings goals – visualize what you are saving for motivation iv. Pay yourself first every month then save v. Map out major purchases to coincide with annual sales vi. Cut down on your biggest expenses – rent, high interest debt vii. Don’t just save money, save – don’t just spend less, put the saved money into a high interest earning savings account viii. Increase your income ix. Get free entertainment – audiobooks, e-books, movies, presentations x. Order smaller servings at restaurants xi. Make your own gifts – Go DIY route and save money xii. Restrict online shopping xiii. Save your loose change – empty your pockets every evening and put the loose change into savings xiv. Bundle Tv and internet subscription xv. Cancel unnecessary subscriptions – streaming xvi. Use the 24hour rule – think over every non-essential purchase for at least 24 hours to avoid impulse purchases. xvii. Treat yourself, but use it as an opportunity to save – if you can’t afford to save the matching amount, you can’t afford the treat either. xviii. Calculate purchases by hours worked instead of cost – is a pair of shoes worth 5 hours long of work? xix. Unsubscribe – avoid temptation by unsubscribing from marketing emails to the stores you spend most money at. xx. Save your windfalls xxi. Aim for short term saving goals – make a goal like saving 10k a month rather than long term savings goal. xxii. Work out online – burn your calories without burning your income xxiii. Plan creative dates – you can have fun and fall in love and still be thrifty xxiv. Buy used – save money and inherit instant character by purchasing gently used items instead of new (car, baby clothes, video games,) xxv. Drink more water – using refillable water bottle it helps dehydration and save you the cost of beverages. xxvi. Buy generic – you don’t need brand-name everything xxvii. Avoid a poverty mentality – while thrift is an obvious way to save, we need to guard against being too frugal. Don’t entertain self- limiting beliefs and make decisions based on fear of loss or failure. Instead base your decisions on what the possible benefits are. Mombo Sacco members are entitled to the following:  Receiving periodically and regularly, or upon request, and at least once a year, a statement of accounts containing the individualized record of your credit and debit transactions.  Attending and participating in voting during General meeting. Each member shall have one vote irrespective of his/her total shareholding.  Electing representatives to attend the general meetings of the SACCO.  Electing or offering oneself for election as an officer of the society, unless otherwise prohibited by any other law or these by-laws.  Submitting proposals on projects or initiatives to the board of directors, for the improvement of the society’s services.  Appointing a next of kin.  Participating in sharing of the society’s surpluses.  Accessing information relating to the society, including internal regulations, registers, minutes of the General Meetings, Supervisory committee reports, annual accounts and inventories, investigation reports at the registered office of the society, subject to the society’s policies and regulations in force at the time.  Voting on all matters put before the general meetings.  Enjoying all other rights prescribed by the Co-operative Act and the rules. Mombo Sacco members are obligated to the following:  Observe the by-laws, code of conduct and ethics of the society, and in particular desist from any corrupt practices in all dealings with the Society.  Protect the image of the society and avoid unnecessary publicity, incitement or careless talk that can injure the reputation of the society.  Inform the SACCO in writing of change of physical address and contact details whenever they occur.  Pay debt obligations to the society without fail and save regularly with the society.  Seek cooperative education to improve awareness and enlightment on cooperative matters; attend meetings and education forums and take part in society’s decision making.  Encourage non-members to join the society.  Identify problems affecting the society and suggest solutions.  Participate in the society’s projects. Mombo Sacco recommends the use of the app Pay Now feature on the homepage to make payments to either Flexible savings, Goals savings, Mchama savings and loans. Mombo Sacco has implemented the following measures to ensure member savings are protected:  All Mombo Sacco savings are insured against death, and permanent disability. When any of the above happens, a member or his beneficiaries as may be the case shall be given twice their savings less any liabilities by the SACCO.  A guarantor’s interests are protected by ensuring a borrower is well assessed and the same shared with the guarantor. The guarantor will also be able to peg the liability they intend to take for any loan they guarantee. In addition, all payments towards loan repayment by the borrower will be allocated to reduce the guarantor’s liability to the loan, thus guarantor’s liability will diminish as time goes by. In addition, in case of borrower default, Mombo SACCO will institute other mechanisms of recovery including but not limited to debt collection from the borrower. Attaching the guarantor’s contributions will always be a last resort.  Lending and loan recovery is M-Wallet is a digital wallet available to Mombo Sacco customers. The wallet has the following attributes: 1. Instant transfers between wallets 2. Payments to and from bank accounts 3. Payments to and from mobile accounts 4. Bill Payments 5. Planning and budgeting Our insurance brokerage enables consumers compare motor, medical and domestic insurance quotes, buy policies and make claims directly to insurers. M-Rewards is a loyalty program that offers cash bonuses to consumers who interact with Mombo Sacco. These cash incentives are redeemable every quarter of the year. Top Savers rewards programme At Mombo Sacco, we are pleased to recognise and reward our top savers monthly and annually across all of our savings plans. We believe in cultivating a culture of responsible financial management, and our rewards programme is designed to recognise and motivate members who are committed to building a better future by utilising innovative digital investment applications available in Kenya. View each month top savers on the Mombo App leaderboard on the homepage. Mombo Sacco rewards monthly top depositors of each savings plan as outlined below (members receive monthly earnings): • Bronze – KES 100 • Silver – KES 250 • Gold – KES 450 • Platinum – KES 650 • Emerald – KES 900 Mombo Sacco honours the annual top savers of each savings plan as outlined below (members earn at the end of every year): • Bronze – KES 3,000 • Silver – KES 12,000 • Gold – KES 18,000 • Platinum – KES 24,000 • Emerald – KES 36,000Email us Send us an Email on support@mombo.africa Call us Talk to Customer Support +254706503230
`;

const about_company = `Welcome to Mombo Sacco, the award-winning digital savings and credit cooperative societywas registered in February 2015 as a Back - Office Services Activity(commonly known as        BOSA), targeted at the rapidly growing urban population of Kenyans and regulated by thecommissioner of cooperatives development.We are dedicated to making savings easy, fun,        and rewarding for our members.With Mombo Sacco, you can achieve your financial goals    while enjoying a range of exclusive benefits.Mombo Sacco head Office is located atWestpark Towers 1 st floor Suite 107 in Westlands, Nairobi, Kenya.`




app.post("/ask", async (req, res) => {
    const prompt = req.body.messages;
    var systemList = [
        {
            role: 'system',

            content: `Your name is Stadi, an assistant at ${company_name}  (${about_company}), carrying detailed and warm conversations as a assistant would, giving relevant feedback except when questions have nothing to do with your expertise, while considering previous questions that the client has already recieved answers for.Use this information as reference data: ${company_data}. When a client refers to you they are referring to the company and the company's knowledge base and not you as an A.I languange model, and never refer to yourself as an A.I model but an assistant. Try not to answer things that have nothing to do with this:  ${about_company}`,
        },


    ];
    var userList=prompt;
    console.log(prompt);
    try {
        const requestData = {
            model: 'gpt-3.5-turbo-16k-0613',
            messages:systemList.concat(userList)
        }

        const headers = {
            'Content-Type': 'application/json',
            Authorization: `Bearer ${openaiApiKey}`
        };

     axios
            .post('https://api.openai.com/v1/chat/completions', requestData, { headers })
            .then((response) => {
                console.log('Response:', response.data);
                const completion = response.data.choices[0].message.content;
                return res.status(200).json({
                    success: true,
                    message: completion,
                });
            })
            .catch((error) => {
                console.error('Error:', error);
                return res.status(500).json({
                    success: false,
                    message: '',
                });
            });
       
    } catch (error) {
        console.log(error.message);
        return res.status(500).json({
            success: false,
            message: '',
        });
    }
});

app.listen(

);

exports.api=functions.https.onRequest(app)
